{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English's Cool - Learn Pics</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <style>
    .lesson-card-img{
        width: 100%;          /* Make it span the full card width */
        height: 300px;        /* Fixed height for all images */
        object-fit: cover;    /* Crop image to fit nicely without distortion */
        object-position: center; /* Center the crop */
        border-radius: 5px 5px 0px 0px;
}
    </style>
</head>
<body style="background-color: #e3f2fd;">   
{% include "game/nav2.html" %}
    <main class="container my-4">
        <h2 class="mb-4">It's time to learn!</h2>
          <form class="d-flex" role="search">
    <input 
      id="lessonSearch"
      class="form-control me-2" 
      type="search" 
      placeholder="Search lessons..." 
      aria-label="Search"
    >
  </form>
  <br>
        <div class="row">
            {% for lesson_data in lessons %}
            <div class="col-md-4 mb-4">                
                <a href="{% url 'lesson_view' lesson_number=lesson_data.number %}" class="text-decoration-none text-dark">
                    <div class="card h-100">
                        <img src="{% static lesson_data.folder|default:'cards/vocabulary.png' %}" class="lesson-card-img" alt="Pronunciation card">
                        <div class="card-body">
                            <h4 class="card-title fw-bold">Lesson {{ lesson_data.number }}</h4>
                            <h5 class="card-title fw-bold">{{ lesson_data.title }}</h5>
                            <p class="card-text">{{lesson_data.description}}</p>
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </main>
{% include "game/footer.html" %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    const searchInput = document.getElementById("lessonSearch");
    const cards = document.querySelectorAll(".card"); // all your lesson cards

    searchInput.addEventListener("input", function() {
      const query = this.value.toLowerCase();

      cards.forEach(card => {
        const title = card.querySelector(".card-title").textContent.toLowerCase();
        const description = card.querySelector(".card-text").textContent.toLowerCase();

        if (title.includes(query) || description.includes(query)) {
          card.parentElement.style.display = "block"; // show the column
        } else {
          card.parentElement.style.display = "none"; // hide the column
        }
      });
    });
  });
</script>
</body>
</html>
